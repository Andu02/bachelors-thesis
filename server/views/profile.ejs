<%- include('partials/header', { title: "Profil" }) %>

<div class="card shadow p-4" style="width: 100%; max-width: 450px;">
  <h2 class="text-center mb-4">Profilul utilizatorului</h2>

  <% if (message) { %>
    <div class="alert alert-info"><%= message %></div>
  <% } %>

  <p><strong>Nume utilizator:</strong> <%= user.username %></p>

  <button id="toggle-button" class="btn btn-outline-primary w-100 mb-3" onclick="toggleForm()">
    Schimbă parola
  </button>

  <form id="change-password-form" class="d-none">
    <label for="old-password" class="form-label">Parola veche</label>
    <input
      type="password"
      class="form-control"
      id="old-password"
      name="oldPassword"
      required
      minlength="3"
      maxlength="30"
    />

    <label for="new-password" class="form-label mt-3">Parola nouă</label>
    <input
      type="password"
      class="form-control"
      id="new-password"
      name="newPassword"
      required
      minlength="3"
      maxlength="30"
      pattern="[A-Za-z]+"
      title="Doar litere A–Z (fără cifre, spații sau simboluri)"
    />

    <label for="change-method" class="form-label mt-3">Noua metodă de criptare</label>
    <select class="form-select" id="change-method" name="method" required>
      <%- include('partials/encryption-methods') %>
    </select>

    <%- include('partials/method-options') %>

    <button type="submit" class="btn btn-warning w-100 mt-3">Schimbă parola</button>
  </form>

  <div id="change-password-message" class="alert d-none mt-3"></div>

  <script type="module" src="/js/change-password.js"></script>
  <script type="module" src="/js/method-options.js"></script>
</div>

<%- include('partials/footer') %>
